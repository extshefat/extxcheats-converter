<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EXT X CHEATS CONVERTER</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#07121a; --bg2:#0f2434; --accent:#00f7ff; --card:#041323;
      --glass: rgba(0,10,30,0.65);
      --radius:18px;
      --mono: 'Orbitron', sans-serif;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:var(--mono);
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:28px;
    }
    .wrap{
      max-width:1100px;margin:30px auto;
      position:relative; z-index:2;
      display:grid; grid-template-columns:1fr 420px; gap:28px;
    }
    .card{
      background:var(--glass);
      border:1px solid rgba(0,247,255,0.08);
      box-shadow:0 8px 40px rgba(0,0,0,0.6), 0 0 35px rgba(0,247,255,0.02) inset;
      border-radius:var(--radius);
      padding:26px;
      min-height:420px;
    }
    header h1{font-size:26px;margin-bottom:6px;text-shadow:0 0 12px rgba(0,247,255,0.12)}
    header p{font-size:13px;color:rgba(0,247,255,0.75); margin-bottom:14px}
    label{display:block;font-size:12px;margin-bottom:8px;color:rgba(0,247,255,0.9)}
    textarea, input[type=text], pre{
      width:100%; border-radius:12px; padding:14px;
      background:#000000; color:var(--accent); border:1px solid rgba(0,247,255,0.12);
      font-family:monospace; font-size:13px; resize:vertical;
    }
    textarea{min-height:150px}
    .controls{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}
    .btn{
      background:linear-gradient(180deg, rgba(0,247,255,0.12), rgba(0,247,255,0.04));
      color:var(--accent); border:1px solid rgba(0,247,255,0.18);
      padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700;
      font-size:13px;
    }
    .btn.ghost{background:transparent; border:1px dashed rgba(0,247,255,0.12)}
    .small{font-size:12px;padding:8px 10px}
    .col-right{display:flex;flex-direction:column;gap:14px}
    .card .section{margin-bottom:12px}
    .output pre{min-height:160px; white-space:pre-wrap;}
    .stats{display:flex;gap:12px;align-items:center;margin-top:10px;font-size:13px}
    .chip{background:rgba(0,0,0,0.4);padding:8px 10px;border-radius:999px;border:1px solid rgba(0,247,255,0.06)}
    footer{margin-top:18px;text-align:center;color:rgba(0,247,255,0.6);font-size:13px}
    .discord-icon{
      position:fixed; right:20px; top:20px; width:58px;height:58px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #7289da, #4e5d94);
      display:flex;align-items:center;justify-content:center;box-shadow:0 0 20px #7289da;
      z-index:9;
    }
    .discord-icon img{width:28px;height:28px}
    @media(max-width:980px){
      .wrap{grid-template-columns:1fr; padding:0 8px}
      .col-right{order:2}
    }
  </style>
</head>
<body>
  <a class="discord-icon" href="https://discord.gg/nhA2ynFvwS" target="_blank" title="Join Discord">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" alt="discord">
  </a>

  <div id="particles-js" style="position:fixed;inset:0;z-index:1;pointer-events:none"></div>

  <div class="wrap" role="main">
    <div class="card" aria-labelledby="title">
      <header>
        <h1 id="title">EXT X CHEATS — CONVERTER</h1>
        <p>HEX / AOB → C/C++ array converter. Multiple modes built for C++ cheat devs: AOB (?? support), HEX, BASE64 output, and quick copy/download.</p>
      </header>

      <div class="section">
        <label for="mode">Mode</label>
        <div style="display:flex;gap:8px">
          <button id="modeAob" class="btn small">AOB → C++ (with ??)</button>
          <button id="modeHex" class="btn ghost small">HEX → C array</button>
          <button id="modeB64" class="btn ghost small">Base64 → Byte Array</button>
        </div>
      </div>

      <div class="section">
        <label for="input">Input (paste AOB / HEX / Base64)</label>
        <textarea id="input" placeholder="Paste AOB like: A1 B2 00 4F ?? 1C  or raw hex: A1B2004F1C or base64 string"></textarea>
        <div class="controls">
          <button id="convert" class="btn">Convert</button>
          <button id="format" class="btn ghost">Normalize Input</button>
          <button id="clear" class="btn ghost">Clear</button>
          <div style="flex:1"></div>
          <div class="chip" id="count">Bytes: 0</div>
        </div>
      </div>

      <div class="section">
        <label>Quick presets</label>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn ghost small preset" data-val="90 90 90">NOP * 3</button>
          <button class="btn ghost small preset" data-val="A1 ?? ?? ?? ??">A1 + wildcard</button>
          <button class="btn ghost small preset" data-val="48 8B C4">Prologue pattern</button>
        </div>
      </div>

      <footer>Developed by EXT SHEFAT </footer>
    </div>

    <aside class="col-right">
      <div class="card output">
        <label>Output</label>
        <pre id="output">// Output will appear here</pre>
        <div style="display:flex;gap:8px;margin-top:10px;">
          <button id="copy" class="btn">Copy</button>
          <button id="download" class="btn">Download .txt</button>
          <button id="asC" class="btn ghost">C style (unsigned char)</button>
          <button id="asExt" class="btn ghost">EXT style (EXT char)</button>
        </div>
        <div class="stats">
          <div class="chip" id="hexCount">Hex pairs: 0</div>
          <div class="chip" id="wildCount">Wildcards: 0</div>
        </div>
      </div>

      <div class="card">
        <label>Options</label>
        <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
          <label style="font-size:13px"><input id="show0x" type="checkbox" checked> Prefix with <code>0x</code></label>
          <label style="font-size:13px"><input id="commaSep" type="checkbox" checked> Comma separated</label>
          <label style="font-size:13px"><input id="uppercase" type="checkbox" checked> Uppercase hex</label>
          <label style="font-size:13px"><input id="wrap" type="checkbox"> Wrap in <code>EXT char aob[] = { ... };</code></label>
        </div>
      </div>
    </aside>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    // particles background
    particlesJS("particles-js", {
      particles: { number: { value: 65 }, color: { value: "#00f7ff" }, shape: { type: "circle" },
        opacity: { value: 0.45 }, size: { value: 3 },
        line_linked: { enable: true, distance: 160, color: "#00f7ff", opacity: 0.2, width: 1 },
        move: { enable: true, speed: 2 }
      }
    });

    // elements
    const input = document.getElementById('input');
    const output = document.getElementById('output');
    const convertBtn = document.getElementById('convert');
    const clearBtn = document.getElementById('clear');
    const formatBtn = document.getElementById('format');
    const copyBtn = document.getElementById('copy');
    const downloadBtn = document.getElementById('download');
    const modeAob = document.getElementById('modeAob');
    const modeHex = document.getElementById('modeHex');
    const modeB64 = document.getElementById('modeB64');
    const countChip = document.getElementById('count');
    const hexCount = document.getElementById('hexCount');
    const wildCount = document.getElementById('wildCount');

    let mode = 'aob';

    function setMode(m){
      mode = m;
      [modeAob,modeHex,modeB64].forEach(b => b.classList.remove('btn'));
      if(m==='aob') modeAob.classList.add('btn');
      if(m==='hex') modeHex.classList.add('btn');
      if(m==='b64') modeB64.classList.add('btn');
    }

    modeAob.addEventListener('click', () => setMode('aob'));
    modeHex.addEventListener('click', () => setMode('hex'));
    modeB64.addEventListener('click', () => setMode('b64'));
    setMode('aob');

    // presets
    document.querySelectorAll('.preset').forEach(p => {
      p.addEventListener('click', () => {
        input.value = p.dataset.val;
      });
    });

    function normalizeInput(text){
      // remove commas, 0x, brackets; keep ?? if present; collapse spaces
      return text.replace(/0x/ig,' ')
                 .replace(/[,<>[\]\(\)]/g,' ')
                 .replace(/\s+/g,' ')
                 .trim();
    }

    function parseAOBtoBytes(txt){
      const parts = txt.trim().split(/\s+/);
      const bytes = [];
      let wild = 0;
      for(const p of parts){
        if(p==='??' || p==='?'){ bytes.push({raw:'??',wild:true}); wild++; continue; }
        const cleaned = p.replace(/[^a-fA-F0-9]/g,'');
        if(cleaned.length===2 && /^[a-fA-F0-9]{2}$/.test(cleaned)){
          bytes.push({raw:cleaned.toUpperCase(), wild:false});
        } else if(cleaned.length>2 && /^[a-fA-F0-9]+$/.test(cleaned)){
          // split contiguous hex
          for(let i=0;i<cleaned.length;i+=2){
            const pair = cleaned.substr(i,2);
            if(pair.length===2){ bytes.push({raw:pair.toUpperCase(), wild:false}); }
          }
        }
      }
      return {bytes, wild};
    }

    function parseBase64ToBytes(b64){
      try {
        const bin = atob(b64.trim());
        const arr = [];
        for(let i=0;i<bin.length;i++){
          let code = bin.charCodeAt(i);
          let hex = code.toString(16).padStart(2,'0').toUpperCase();
          arr.push({raw:hex, wild:false});
        }
        return {bytes:arr, wild:0};
      } catch(e){
        return {bytes:[], wild:0};
      }
    }

    function buildOutput(bytesObj){
      const show0x = document.getElementById('show0x').checked;
      const commaSep = document.getElementById('commaSep').checked;
      const upper = document.getElementById('uppercase').checked;
      const wrap = document.getElementById('wrap').checked;
      const asExt = document.getElementById('asExt').classList.contains('btn') || document.getElementById('asExt').classList.contains('btn');

      const parts = bytesObj.bytes.map(b => {
        if(b.wild) return (show0x? "0x" : "") + "'?'";
        let val = b.raw;
        if(!upper) val = val.toLowerCase();
        return (show0x? "0x" : "") + val;
      });

      let body = commaSep ? parts.join(', ') : parts.join(' ');
      if(wrap){
        const type = document.getElementById('asC').classList.contains('btn') ? 'unsigned char' : 'EXT char';
        body = `${type} aob[] = { ${body} };`;
      }
      return body;
    }

    function updateStats(bytesObj){
      const totalHex = bytesObj.bytes.filter(b=>!b.wild).length;
      const wild = bytesObj.bytes.filter(b=>b.wild).length;
      countChip.textContent = `Convert To BYTE COUNT: ${totalHex}`;
      hexCount.textContent = `Hex pairs: ${totalHex}`;
      wildCount.textContent = `Wildcards: ${wild}`;
    }

    convertBtn.addEventListener('click', () => {
      const raw = input.value;
      if(!raw.trim()){ output.textContent = '// paste something in the input first'; return; }
      let parsed;
      if(mode==='aob'){
        parsed = parseAOBtoBytes(normalizeInput(raw));
      } else if(mode==='hex'){
        parsed = parseAOBtoBytes(raw.replace(/\s+/g,'').match(/.{1,2}/g)?.join(' ') || '');
      } else { // b64
        parsed = parseBase64ToBytes(raw);
      }
      updateStats(parsed);
      output.textContent = buildOutput(parsed);
    });

    formatBtn.addEventListener('click', () => {
      input.value = normalizeInput(input.value);
    });

    clearBtn.addEventListener('click', () => {
      input.value = ''; output.textContent = '// Output will appear here'; updateStats({bytes:[], wild:0});
    });

    copyBtn.addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(output.textContent);
        copyBtn.textContent = 'Copied ✓';
        setTimeout(()=> copyBtn.textContent = 'Copy',1200);
      } catch(e){
        copyBtn.textContent = 'Copy failed';
      }
    });

    downloadBtn.addEventListener('click', () => {
      const blob = new Blob([output.textContent], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'extx_converter_output.txt';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // asC / asExt toggle
    document.getElementById('asC').addEventListener('click', function(){
      this.classList.toggle('btn');
      this.classList.toggle('ghost');
      document.getElementById('asExt').classList.remove('btn'); document.getElementById('asExt').classList.add('ghost');
    });
    document.getElementById('asExt').addEventListener('click', function(){
      this.classList.toggle('btn');
      this.classList.toggle('ghost');
      document.getElementById('asC').classList.remove('btn'); document.getElementById('asC').classList.add('ghost');
    });

    // helper: when typing update live counts
    input.addEventListener('input', () => {
      const txt = input.value.trim();
      const parsed = mode==='b64' ? parseBase64ToBytes(txt) : parseAOBtoBytes(normalizeInput(txt));
      updateStats(parsed);
    });

    // init small state
    document.getElementById('asC').classList.add('btn');
    updateStats({bytes:[], wild:0});
  </script>
</body>
</html>
